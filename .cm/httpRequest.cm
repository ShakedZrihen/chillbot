# -*- mode: yaml -*-
manifest:
  version: 1.0

automations:
  tester:
    on:
      - merge
    if:
      - {{ number_of_tests > 0 }}
    run:
      - action: http-request@v1
        args:
          url: {{ env.SLACK_WEBHOOK }}
          method: "POST"
          body: '{"text": ":tada: kudos *{{ pr.author }}* for adding: *{{ number_of_tests }}* to *{{ repo.name }}* :tada:"}'
  
number_of_tests: {{ source | countTests }}
